{"ast":null,"code":"import{useRef,useContext}from\"react\";import AuthContext from\"../../store/auth-context\";import{useHistory}from\"react-router-dom\";import classes from\"./ProfileForm.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileForm=function ProfileForm(){var history=useHistory();var newPasswordInputRef=useRef();var authCtx=useContext(AuthContext);var submitHandler=function submitHandler(event){event.preventDefault();var enteredNewPassword=newPasswordInputRef.current.value;// add validation (optional)\nfetch(\"https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDOFmuibYVitUo0fyzOm24I32SlqUm7NOc\",{method:\"POST\",body:JSON.stringify({idToken:authCtx.token,password:authCtx.password,returnSecureToken:false}),headers:{\"Content-Type\":\"application-json\"}}).then(function(res){// assumption: Always succeeds!\nhistory.replace(\"/\");});};return/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-password\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"new-password\",minLength:\"6\",ref:newPasswordInputRef})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(\"button\",{children:\"Change Password\"})})]});};export default ProfileForm;","map":{"version":3,"names":["useRef","useContext","AuthContext","useHistory","classes","ProfileForm","history","newPasswordInputRef","authCtx","submitHandler","event","preventDefault","enteredNewPassword","current","value","fetch","method","body","JSON","stringify","idToken","token","password","returnSecureToken","headers","then","res","replace","form","control","action"],"sources":["C:/Users/bobso/Desktop/React Projects/07-authentication/src/components/Profile/ProfileForm.js"],"sourcesContent":["import { useRef, useContext } from \"react\";\nimport AuthContext from \"../../store/auth-context\";\nimport { useHistory } from \"react-router-dom\";\n\nimport classes from \"./ProfileForm.module.css\";\n\nconst ProfileForm = () => {\n\tconst history = useHistory();\n\tconst newPasswordInputRef = useRef();\n\tconst authCtx = useContext(AuthContext);\n\n\tconst submitHandler = (event) => {\n\t\tevent.preventDefault();\n\n\t\tconst enteredNewPassword = newPasswordInputRef.current.value;\n\n\t\t// add validation (optional)\n\n\t\tfetch(\n\t\t\t\"https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDOFmuibYVitUo0fyzOm24I32SlqUm7NOc\",\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tidToken: authCtx.token,\n\t\t\t\t\tpassword: authCtx.password,\n\t\t\t\t\treturnSecureToken: false,\n\t\t\t\t}),\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t).then((res) => {\n\t\t\t// assumption: Always succeeds!\n\n\t\t\thistory.replace(\"/\");\n\t\t});\n\t};\n\n\treturn (\n\t\t<form className={classes.form} onSubmit={submitHandler}>\n\t\t\t<div className={classes.control}>\n\t\t\t\t<label htmlFor=\"new-password\">New Password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tid=\"new-password\"\n\t\t\t\t\tminLength=\"6\"\n\t\t\t\t\tref={newPasswordInputRef}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={classes.action}>\n\t\t\t\t<button>Change Password</button>\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n\nexport default ProfileForm;\n"],"mappings":"AAAA,OAASA,MAAT,CAAiBC,UAAjB,KAAmC,OAAnC,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACzB,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CACA,GAAMI,CAAAA,mBAAmB,CAAGP,MAAM,EAAlC,CACA,GAAMQ,CAAAA,OAAO,CAAGP,UAAU,CAACC,WAAD,CAA1B,CAEA,GAAMO,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAChCA,KAAK,CAACC,cAAN,GAEA,GAAMC,CAAAA,kBAAkB,CAAGL,mBAAmB,CAACM,OAApB,CAA4BC,KAAvD,CAEA;AAEAC,KAAK,CACJ,uGADI,CAEJ,CACCC,MAAM,CAAE,MADT,CAECC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACpBC,OAAO,CAAEZ,OAAO,CAACa,KADG,CAEpBC,QAAQ,CAAEd,OAAO,CAACc,QAFE,CAGpBC,iBAAiB,CAAE,KAHC,CAAf,CAFP,CAOCC,OAAO,CAAE,CACR,eAAgB,kBADR,CAPV,CAFI,CAAL,CAaEC,IAbF,CAaO,SAACC,GAAD,CAAS,CACf;AAEApB,OAAO,CAACqB,OAAR,CAAgB,GAAhB,EACA,CAjBD,EAkBA,CAzBD,CA2BA,mBACC,cAAM,SAAS,CAAEvB,OAAO,CAACwB,IAAzB,CAA+B,QAAQ,CAAEnB,aAAzC,wBACC,aAAK,SAAS,CAAEL,OAAO,CAACyB,OAAxB,wBACC,cAAO,OAAO,CAAC,cAAf,0BADD,cAEC,cACC,IAAI,CAAC,UADN,CAEC,EAAE,CAAC,cAFJ,CAGC,SAAS,CAAC,GAHX,CAIC,GAAG,CAAEtB,mBAJN,EAFD,GADD,cAUC,YAAK,SAAS,CAAEH,OAAO,CAAC0B,MAAxB,uBACC,2CADD,EAVD,GADD,CAgBA,CAhDD,CAkDA,cAAezB,CAAAA,WAAf"},"metadata":{},"sourceType":"module"}